@using BugTracker.Models;
@using BugTracker.Helpers;

@model IEnumerable<UserProfileViewModel>

@{
    ViewBag.Title = "ManageRoles";
    var roleHelper = new UserRolesHelper();
}
<h2>ManageRoles</h2>
@Html.BeginForm()){
<div class="form-group">
    <div class="col-md-offset-2 col-md-5">
        @Html.ListBox("Users", null, htmlAttributes: new { @class = "form-control" })
    </div>
    <div class="col-md-offset-1 col-md-3">
        @Html.DropDownList("RoleName", null, "-- Select Role --", htmlAttributes: new { @class = "form-control" })
    </div>
</div>
<div class="form-group">
    <div class="col-md-offset-2 col-md-10">
        <input type="submit" value="Assign" class="btn btn-default" />
    </div>
</div>
}
<hr />
<table id="userTable" class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Avatar</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Display Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in Model)
        {
            <tr>
                @* ADD LINKS TO USER PROFILE VIEWS??? *@
                <td>@user.AvatarUrl</td>
                <td>@user.FirstName</td>
                <td>@user.LastName</td>
                <td>@user.DisplayName</td>
                <td>@user.Email</td>
                <td>@roleHelper.ListUserRoles(user.Id).FirstOrDefault()</td>
                <td>
                    @Html.ActionLink("Manage Role", "ManageUserRole", "Admin", new { userId = user.Id }, null) |
                    @Html.ActionLink("Manage Projects", "ManageProjects", "Admin", new { userId = user.Id }, null)
                </td>
            </tr>
        }
    </tbody>
</table>
